# ç½‘ç»œæ¸¸æˆæœåŠ¡å™¨ç®¡ç†åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°
ä¸ºç½‘ç»œæ¸¸æˆæ·»åŠ äº†æœåŠ¡å™¨ç®¡ç†åŠŸèƒ½ï¼Œå…è®¸ç©å®¶è´­ä¹°å’Œç®¡ç†ä¸åŒçº§åˆ«çš„æœåŠ¡å™¨ä»¥æ”¯æŒæ¸¸æˆè¿è¥ã€‚

## æœåŠ¡å™¨ç±»å‹

### 1. åˆçº§æœåŠ¡å™¨
- **å®¹é‡**ï¼š10ä¸‡äºº
- **è´¹ç”¨**ï¼šÂ¥100,000
- **é€‚ç”¨åœºæ™¯**ï¼šå°è§„æ¨¡è¿è¥ï¼Œé€‚åˆæ¸¸æˆåˆæœŸ

### 2. ä¸­çº§æœåŠ¡å™¨
- **å®¹é‡**ï¼š50ä¸‡äºº
- **è´¹ç”¨**ï¼šÂ¥500,000
- **é€‚ç”¨åœºæ™¯**ï¼šä¸­ç­‰è§„æ¨¡è¿è¥ï¼Œé€‚åˆæ¸¸æˆå‘å±•æœŸ

### 3. é«˜çº§æœåŠ¡å™¨
- **å®¹é‡**ï¼š200ä¸‡äºº
- **è´¹ç”¨**ï¼šÂ¥2,000,000
- **é€‚ç”¨åœºæ™¯**ï¼šå¤§è§„æ¨¡è¿è¥ï¼Œé€‚åˆçƒ­é—¨æ¸¸æˆ

### 4. äº‘æœåŠ¡å™¨
- **å®¹é‡**ï¼š500ä¸‡äºº
- **è´¹ç”¨**ï¼šÂ¥5,000,000
- **é€‚ç”¨åœºæ™¯**ï¼šæœ€é«˜æ€§èƒ½ï¼Œé€‚åˆè¶…çº§çƒ­é—¨æ¸¸æˆ

## åŠŸèƒ½ç‰¹ç‚¹

### 1. æœåŠ¡å™¨æ¦‚è§ˆ
- æ˜¾ç¤ºæ€»å®¹é‡ï¼ˆä¸‡äººï¼‰
- æ˜¾ç¤ºå·²è´­æœåŠ¡å™¨æ•°é‡
- æ˜¾ç¤ºæ€»æŠ•å…¥è´¹ç”¨

### 2. æœåŠ¡å™¨åˆ—è¡¨
- æŸ¥çœ‹æ‰€æœ‰å·²è´­ä¹°çš„æœåŠ¡å™¨
- æ˜¾ç¤ºæœåŠ¡å™¨ç±»å‹ã€å®¹é‡ã€è´­ä¹°æ—¶é—´
- æ˜¾ç¤ºæœåŠ¡å™¨è¿è¡ŒçŠ¶æ€ï¼ˆè¿è¡Œä¸­/å·²åœç”¨ï¼‰

### 3. è´­ä¹°æœåŠ¡å™¨
- å¯ä»¥è´­ä¹°å¤šå°ä¸åŒç±»å‹çš„æœåŠ¡å™¨
- æœåŠ¡å™¨å®¹é‡å åŠ è®¡ç®—
- æ¯å°æœåŠ¡å™¨ç‹¬ç«‹æ˜¾ç¤ºè´­ä¹°æ—¶é—´

## ä½¿ç”¨æ–¹æ³•

### è®¿é—®æœåŠ¡å™¨ç®¡ç†
1. æ‰“å¼€ç½‘ç»œæ¸¸æˆçš„"æ¸¸æˆç®¡ç†"ç•Œé¢
2. ç‚¹å‡»"æœåŠ¡å™¨ç®¡ç†"æŒ‰é’®ï¼ˆğŸ–¥ï¸å›¾æ ‡ï¼‰
3. è¿›å…¥æœåŠ¡å™¨ç®¡ç†å¯¹è¯æ¡†

### è´­ä¹°æœåŠ¡å™¨
1. åœ¨"è´­ä¹°æ–°æœåŠ¡å™¨"åŒºåŸŸæŸ¥çœ‹æ‰€æœ‰å¯ç”¨æœåŠ¡å™¨ç±»å‹
2. æ¯ç§æœåŠ¡å™¨æ˜¾ç¤ºï¼š
   - æœåŠ¡å™¨åç§°
   - å®¹é‡å’Œè´¹ç”¨
   - "è´­ä¹°"æŒ‰é’®
3. ç‚¹å‡»"è´­ä¹°"æŒ‰é’®å³å¯è´­ä¹°å¯¹åº”ç±»å‹çš„æœåŠ¡å™¨
4. è´­ä¹°åè´¹ç”¨å°†ä»å…¬å¸èµ„é‡‘ä¸­æ‰£é™¤
5. æ–°æœåŠ¡å™¨å°†ç«‹å³ç”Ÿæ•ˆå¹¶æ˜¾ç¤ºåœ¨å·²è´­æœåŠ¡å™¨åˆ—è¡¨ä¸­

### æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
- å·²è´­ä¹°çš„æœåŠ¡å™¨æ˜¾ç¤ºåœ¨"å·²è´­ä¹°çš„æœåŠ¡å™¨"åˆ—è¡¨ä¸­
- æ¯å°æœåŠ¡å™¨æ˜¾ç¤ºï¼š
  - æœåŠ¡å™¨ç±»å‹å’Œåç§°
  - å®¹é‡ï¼ˆä¸‡äººï¼‰
  - è´­ä¹°æ—¶é—´ï¼ˆæ¸¸æˆå†…æ—¶é—´ï¼‰
  - è¿è¡ŒçŠ¶æ€ï¼ˆç»¿è‰²"è¿è¡Œä¸­"æˆ–ç°è‰²"å·²åœç”¨"ï¼‰

## æŠ€æœ¯å®ç°

### æ–°å¢æ–‡ä»¶
1. **ServerData.kt**
   - `ServerType` æšä¸¾ï¼šå®šä¹‰å››ç§æœåŠ¡å™¨ç±»å‹
   - `ServerInstance` æ•°æ®ç±»ï¼šæœåŠ¡å™¨å®ä¾‹
   - `GameServerInfo` æ•°æ®ç±»ï¼šæ¸¸æˆæœåŠ¡å™¨ä¿¡æ¯æ±‡æ€»

### ä¿®æ”¹æ–‡ä»¶
1. **GameData.kt**
   - åœ¨ `Game` æ•°æ®ç±»ä¸­æ·»åŠ  `serverInfo` å­—æ®µ

2. **GameRevenueData.kt**
   - åœ¨ `RevenueManager` ä¸­æ·»åŠ æœåŠ¡å™¨ç®¡ç†ç›¸å…³æ–¹æ³•ï¼š
     - `getGameServerInfo()`: è·å–æ¸¸æˆæœåŠ¡å™¨ä¿¡æ¯
     - `purchaseServer()`: è´­ä¹°æœåŠ¡å™¨
     - `deactivateServer()`: åœç”¨æœåŠ¡å™¨
     - `activateServer()`: æ¿€æ´»æœåŠ¡å™¨
     - `hasEnoughServerCapacity()`: æ£€æŸ¥å®¹é‡æ˜¯å¦è¶³å¤Ÿ

3. **GameRevenueDialog.kt**
   - æ·»åŠ  `ServerManagementDialog` ç»„ä»¶
   - æ·»åŠ  `ServerStatItem` ç»„ä»¶ï¼ˆæœåŠ¡å™¨ç»Ÿè®¡é¡¹ï¼‰
   - æ·»åŠ  `ServerItemCard` ç»„ä»¶ï¼ˆæœåŠ¡å™¨å¡ç‰‡ï¼‰
   - æ·»åŠ  `PurchaseServerCard` ç»„ä»¶ï¼ˆè´­ä¹°æœåŠ¡å™¨å¡ç‰‡ï¼‰
   - åœ¨æ¸¸æˆç®¡ç†åŒºåŸŸæ·»åŠ "æœåŠ¡å™¨ç®¡ç†"æŒ‰é’®

4. **EnhancedGameProjectCard.kt**
   - æ·»åŠ  `onPurchaseServer` å›è°ƒå‚æ•°
   - ä¼ é€’æœåŠ¡å™¨è´­ä¹°å›è°ƒç»™ `GameRevenueDialog`

## æ³¨æ„äº‹é¡¹

1. **ä»…ç½‘ç»œæ¸¸æˆå¯ç”¨**ï¼šæœåŠ¡å™¨ç®¡ç†åŠŸèƒ½ä»…å¯¹å•†ä¸šæ¨¡å¼ä¸º"ç½‘ç»œæ¸¸æˆ"çš„é¡¹ç›®æ˜¾ç¤º
2. **è´¹ç”¨å³æ—¶æ‰£é™¤**ï¼šè´­ä¹°æœåŠ¡å™¨æ—¶ï¼Œè´¹ç”¨ä¼šç«‹å³ä»å…¬å¸èµ„é‡‘ä¸­æ‰£é™¤
3. **å®¹é‡å åŠ **ï¼šè´­ä¹°å¤šå°æœåŠ¡å™¨æ—¶ï¼Œæ€»å®¹é‡ä¸ºæ‰€æœ‰æ¿€æ´»æœåŠ¡å™¨çš„å®¹é‡ä¹‹å’Œ
4. **æ— æ³•åˆ é™¤**ï¼šå·²è´­ä¹°çš„æœåŠ¡å™¨æ— æ³•åˆ é™¤ï¼Œåªèƒ½åœç”¨
5. **è´­ä¹°æ—¶é—´è®°å½•**ï¼šæ¯å°æœåŠ¡å™¨éƒ½ä¼šè®°å½•è´­ä¹°æ—¶çš„æ¸¸æˆå†…æ—¶é—´ï¼ˆå¹´/æœˆ/æ—¥ï¼‰

## åç»­æ‰©å±•å»ºè®®

1. **å®¹é‡ä¸Šé™æé†’**ï¼šå½“ç©å®¶æ•°é‡æ¥è¿‘æœåŠ¡å™¨å®¹é‡ä¸Šé™æ—¶æ˜¾ç¤ºè­¦å‘Š
2. **æœåŠ¡å™¨ç»´æŠ¤æˆæœ¬**ï¼šä¸ºæ¯å°æœåŠ¡å™¨æ·»åŠ æœˆåº¦ç»´æŠ¤è´¹ç”¨
3. **æœåŠ¡å™¨å‡çº§**ï¼šå…è®¸å°†ä½çº§æœåŠ¡å™¨å‡çº§ä¸ºé«˜çº§æœåŠ¡å™¨
4. **æœåŠ¡å™¨åœ°åŸŸ**ï¼šæ·»åŠ ä¸åŒåœ°åŸŸçš„æœåŠ¡å™¨é€‰æ‹©ï¼ˆå½±å“ä¸åŒåœ°åŒºçš„ç©å®¶ä½“éªŒï¼‰
5. **è´Ÿè½½å‡è¡¡**ï¼šå½“æ‹¥æœ‰å¤šå°æœåŠ¡å™¨æ—¶æ˜¾ç¤ºè´Ÿè½½åˆ†å¸ƒæƒ…å†µ
6. **æœåŠ¡å™¨äº‹ä»¶**ï¼šéšæœºè§¦å‘æœåŠ¡å™¨æ•…éšœã€æ”»å‡»ç­‰äº‹ä»¶

## è°ƒç”¨ç¤ºä¾‹

åœ¨ä½¿ç”¨ `EnhancedGameProjectCard` æ—¶ï¼Œéœ€è¦ä¼ é€’ `onPurchaseServer` å›è°ƒï¼š

```kotlin
EnhancedGameProjectCard(
    game = game,
    availableEmployees = employees,
    onEmployeeAssigned = { game, assignedEmployees -> 
        // å¤„ç†å‘˜å·¥åˆ†é…
    },
    onGameUpdate = { updatedGame ->
        // å¤„ç†æ¸¸æˆæ›´æ–°
    },
    onPurchaseServer = { game, serverType ->
        // å¤„ç†æœåŠ¡å™¨è´­ä¹°
        val cost = serverType.cost
        if (money >= cost) {
            // æ‰£é™¤è´¹ç”¨
            money -= cost
            // è´­ä¹°æœåŠ¡å™¨
            RevenueManager.purchaseServer(
                gameId = game.id,
                serverType = serverType,
                currentYear = currentYear,
                currentMonth = currentMonth,
                currentDay = currentDay
            )
            // æ›´æ–°æ¸¸æˆä¿¡æ¯
            val serverInfo = RevenueManager.getGameServerInfo(game.id)
            val updatedGame = game.copy(serverInfo = serverInfo)
            onGameUpdate(updatedGame)
        } else {
            // æ˜¾ç¤ºèµ„é‡‘ä¸è¶³æç¤º
        }
    }
)
```
