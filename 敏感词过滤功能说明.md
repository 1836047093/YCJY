# 敏感词过滤功能说明

## 功能概述
为防止玩家使用现实世界存在的公司名和游戏名，系统集成了敏感词过滤功能。

## 实现文件

### 1. SensitiveWordFilter.kt
**位置**: `app/src/main/java/com/example/yjcy/utils/SensitiveWordFilter.kt`

**功能**:
- 维护现实世界存在的游戏公司名词库（中英文）
- 维护现实世界存在的游戏名词库（中英文）
- 提供敏感词检测方法

**包含的敏感词类型**:

#### 游戏公司（部分示例）
- **国内公司**: 腾讯、网易、米哈游、完美世界、莉莉丝、鹰角网络等
- **国际公司**: 任天堂、索尼、微软、暴雪、动视、动视暴雪、EA、育碧、卡普空、拳头等

#### 游戏名称（部分示例）
- **腾讯系**: 王者荣耀、和平精英、穿越火线、英雄联盟、无畏契约等
- **网易系**: 梦幻西游、阴阳师、永劫无间、逆水寒、第五人格等
- **米哈游系**: 原神、崩坏3、崩坏：星穹铁道、绝区零等
- **国际游戏**: 使命召唤、三角洲行动、CSGO、DOTA2、GTA、塞尔达传说、最终幻想、怪物猎人等

### 2. MainActivity.kt
**修改位置**: `GameSetupScreen` 函数

**新增功能**:
- 添加 `companyNameError` 状态变量存储错误信息
- 在公司名输入时实时检测敏感词
- 显示错误提示："存在敏感词汇，请换个公司名"

**验证规则**:
1. 公司名最多5个字符
2. 只能输入字符和数字
3. 不能包含敏感词（公司名）

### 3. EnhancedProjectManagement.kt
**修改位置**: 
- `SuperEnhancedGameDevelopmentDialog` 函数
- `EnhancedGameDevelopmentDialog` 函数
- `GameNameInputStep` 函数

**新增功能**:
- 添加 `isGameNameValid` 和 `gameNameError` 状态变量
- 在游戏名输入时实时检测敏感词
- 显示错误提示："存在敏感词汇，请换个游戏名"
- 错误时输入框边框变红

**验证规则**:
1. 游戏名最多20个字符
2. 不能包含敏感词（游戏名）

## 使用示例

### 公司名验证
```kotlin
// 输入"腾讯" -> 错误: "存在敏感词汇，请换个公司名"
// 输入"网易" -> 错误: "存在敏感词汇，请换个公司名"
// 输入"Tencent" -> 错误: "存在敏感词汇，请换个公司名"
// 输入"星河游戏" -> 通过 ✓
```

### 游戏名验证
```kotlin
// 输入"王者荣耀" -> 错误: "存在敏感词汇，请换个游戏名"
// 输入"使命召唤" -> 错误: "存在敏感词汇，请换个游戏名"
// 输入"Call of Duty" -> 错误: "存在敏感词汇，请换个游戏名"
// 输入"无尽冒险" -> 通过 ✓
```

## 敏感词检测逻辑

### containsSensitiveCompanyName()
```kotlin
fun containsSensitiveCompanyName(name: String): Boolean {
    val normalizedName = name.trim().lowercase()
    return realCompanyNames.any { sensitive ->
        normalizedName.contains(sensitive.lowercase())
    }
}
```

### containsSensitiveGameName()
```kotlin
fun containsSensitiveGameName(name: String): Boolean {
    val normalizedName = name.trim().lowercase()
    return realGameNames.any { sensitive ->
        normalizedName.contains(sensitive.lowercase())
    }
}
```

**检测特点**:
- 不区分大小写
- 支持部分匹配（例如："腾讯游戏"会被检测为包含"腾讯"）
- 去除前后空格后检测

## UI交互

### 错误显示
- 输入框边框变红
- 下方显示红色错误提示文字
- 错误状态下禁用"下一步"或"确认"按钮（需根据实际逻辑调整）

### 实时验证
- 每次输入字符都会立即触发验证
- 用户可以即时看到验证结果
- 清空输入框会清除错误状态

## 扩展敏感词库

如需添加更多敏感词，编辑 `SensitiveWordFilter.kt`:

```kotlin
private val realCompanyNames = setOf(
    // ... 现有词汇 ...
    "新增公司名" // 添加到这里
)

private val realGameNames = setOf(
    // ... 现有词汇 ...
    "新增游戏名" // 添加到这里
)
```

## 注意事项

1. **性能优化**: 使用 `Set` 数据结构，查询效率为 O(n)，n 为敏感词数量
2. **中英文支持**: 敏感词库包含中英文常见写法
3. **误判处理**: 部分词汇可能导致误判（如"战神"既是游戏名也是常用词），可根据需求调整
4. **实时更新**: 敏感词库可随游戏行业变化动态更新

## 测试建议

### 公司名测试用例
- ✅ "腾讯" -> 拒绝
- ✅ "网易游戏" -> 拒绝
- ✅ "Blizzard" -> 拒绝
- ✅ "星河互娱" -> 通过
- ✅ "梦境工作室" -> 通过

### 游戏名测试用例
- ✅ "王者荣耀" -> 拒绝
- ✅ "League of Legends" -> 拒绝
- ✅ "原神手游" -> 拒绝
- ✅ "无尽的冒险" -> 通过
- ✅ "星际征途" -> 通过

## 后续优化方向

1. **动态加载敏感词库**: 从服务器或配置文件加载，便于更新
2. **分级过滤**: 区分高危敏感词（完全禁止）和低危敏感词（仅警告）
3. **智能建议**: 检测到敏感词时，自动推荐替代名称
4. **用户申诉**: 允许用户申诉误判的敏感词
5. **Trie树优化**: 使用字典树提升大规模敏感词检测性能
