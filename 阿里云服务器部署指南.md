# é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²å…‘æ¢ç APIå®Œæ•´æŒ‡å—

## ğŸ“‹ å‰ç½®æ¡ä»¶

- âœ… å·²æœ‰é˜¿é‡Œäº‘æœåŠ¡å™¨
- âœ… æœåŠ¡å™¨å¯ä»¥SSHè¿æ¥
- âœ… æœåŠ¡å™¨æœ‰å…¬ç½‘IP

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šè¿æ¥æœåŠ¡å™¨å¹¶é…ç½®ç¯å¢ƒ

### 1.1 SSHè¿æ¥æœåŠ¡å™¨

```bash
ssh root@your-server-ip
# æˆ–ä½¿ç”¨å¯†é’¥
ssh -i your-key.pem root@your-server-ip
```

### 1.2 æ›´æ–°ç³»ç»Ÿ

```bash
# Ubuntu/Debian
apt update && apt upgrade -y

# CentOS
yum update -y
```

### 1.3 å®‰è£…Node.jsï¼ˆæ¨èæ–¹æ¡ˆï¼‰

```bash
# å®‰è£…Node.js 18.x
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt-get install -y nodejs

# éªŒè¯å®‰è£…
node -v  # åº”è¯¥æ˜¾ç¤º v18.x.x
npm -v   # åº”è¯¥æ˜¾ç¤º 9.x.x
```

### 1.4 å®‰è£…MySQLæ•°æ®åº“

```bash
# å®‰è£…MySQL
apt-get install -y mysql-server

# å¯åŠ¨MySQLæœåŠ¡
systemctl start mysql
systemctl enable mysql

# å®‰å…¨é…ç½®ï¼ˆè®¾ç½®rootå¯†ç ï¼‰
mysql_secure_installation
```

## ğŸ—„ï¸ ç¬¬äºŒæ­¥ï¼šé…ç½®æ•°æ®åº“

### 2.1 ç™»å½•MySQL

```bash
mysql -u root -p
# è¾“å…¥åˆšæ‰è®¾ç½®çš„rootå¯†ç 
```

### 2.2 åˆ›å»ºæ•°æ®åº“å’Œè¡¨

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE redeem_codes CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE redeem_codes;

-- åˆ›å»ºå…‘æ¢ç è¡¨
CREATE TABLE redeem_codes (
    code VARCHAR(50) PRIMARY KEY COMMENT 'å…‘æ¢ç ',
    type VARCHAR(20) NOT NULL COMMENT 'ç±»å‹ï¼šsupporter/gm',
    is_valid TINYINT(1) DEFAULT 1 COMMENT 'æ˜¯å¦æœ‰æ•ˆ',
    max_uses INT DEFAULT 1 COMMENT 'æœ€å¤§ä½¿ç”¨æ¬¡æ•°',
    used_count INT DEFAULT 0 COMMENT 'å·²ä½¿ç”¨æ¬¡æ•°',
    used_by_user_id VARCHAR(100) DEFAULT NULL COMMENT 'ä½¿ç”¨ç”¨æˆ·ID',
    used_at DATETIME DEFAULT NULL COMMENT 'ä½¿ç”¨æ—¶é—´',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    INDEX idx_type (type),
    INDEX idx_used_by_user_id (used_by_user_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å…‘æ¢ç è¡¨';

-- åˆ›å»ºç”¨æˆ·å…‘æ¢ç è¡¨
CREATE TABLE user_redeem_codes (
    user_id VARCHAR(100) PRIMARY KEY COMMENT 'ç”¨æˆ·ID',
    used_codes TEXT COMMENT 'å·²ä½¿ç”¨çš„å…‘æ¢ç åˆ—è¡¨ï¼ˆJSONæ ¼å¼ï¼‰',
    gm_mode_unlocked TINYINT(1) DEFAULT 0 COMMENT 'æ˜¯å¦è§£é”GMæ¨¡å¼',
    supporter_unlocked TINYINT(1) DEFAULT 0 COMMENT 'æ˜¯å¦è§£é”æ”¯æŒè€…åŠŸèƒ½',
    last_updated DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æœ€åæ›´æ–°æ—¶é—´',
    INDEX idx_gm_mode (gm_mode_unlocked),
    INDEX idx_supporter (supporter_unlocked)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·å…‘æ¢ç è¡¨';

-- åˆ›å»ºæ•°æ®åº“ç”¨æˆ·ï¼ˆç”¨äºAPIè¿æ¥ï¼‰
CREATE USER 'redeem_api'@'localhost' IDENTIFIED BY 'your_secure_password_here';
GRANT ALL PRIVILEGES ON redeem_codes.* TO 'redeem_api'@'localhost';
FLUSH PRIVILEGES;

-- é€€å‡ºMySQL
EXIT;
```

### 2.3 åˆå§‹åŒ–å…‘æ¢ç æ•°æ®

```bash
# å›åˆ°MySQL
mysql -u root -p redeem_codes
```

```sql
-- æ’å…¥æ”¯æŒè€…å…‘æ¢ç ï¼ˆSUPPORTER001-150ï¼‰
INSERT INTO redeem_codes (code, type) VALUES
('SUPPORTER001', 'supporter'),
('SUPPORTER002', 'supporter'),
('SUPPORTER003', 'supporter'),
-- ... ç»§ç»­åˆ°150
('SUPPORTER150', 'supporter'),
('PROGM', 'gm');

-- æ‰¹é‡ç”Ÿæˆè„šæœ¬ï¼ˆåœ¨MySQLä¸­æ‰§è¡Œï¼‰
-- å¦‚æœä¸æƒ³æ‰‹åŠ¨è¾“å…¥ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„Pythonè„šæœ¬ç”ŸæˆSQL
```

**æˆ–è€…ä½¿ç”¨Pythonè„šæœ¬ç”ŸæˆSQLï¼š**

```bash
# åˆ›å»ºç”Ÿæˆè„šæœ¬
cat > generate_codes.py << 'EOF'
for i in range(1, 151):
    code = f"SUPPORTER{i:03d}"
    print(f"('{code}', 'supporter'),")
print("('PROGM', 'gm');")
EOF

python3 generate_codes.py > codes.sql
# ç„¶åç¼–è¾‘codes.sqlï¼Œæ·»åŠ INSERTè¯­å¥å¤´éƒ¨
```

## ğŸ’» ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²åç«¯API

### 3.1 åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
mkdir -p /opt/redeem-api
cd /opt/redeem-api
```

### 3.2 åˆ›å»ºpackage.json

```bash
cat > package.json << 'EOF'
{
  "name": "redeem-api",
  "version": "1.0.0",
  "description": "å…‘æ¢ç APIæœåŠ¡",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "mysql2": "^3.6.0",
    "cors": "^2.8.5",
    "express-rate-limit": "^6.8.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
EOF
```

### 3.3 å®‰è£…ä¾èµ–

```bash
npm install
```

### 3.4 åˆ›å»ºæœåŠ¡å™¨ä»£ç 

```bash
cat > server.js << 'EOF'
const express = require('express');
const mysql = require('mysql2/promise');
const cors = require('cors');
const rateLimit = require('express-rate-limit');

const app = express();

// ä¸­é—´ä»¶
app.use(cors());
app.use(express.json());

// é™æµï¼šæ¯15åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 100,
  message: { success: false, message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•' }
});
app.use('/api/v1/redeem', limiter);

// æ•°æ®åº“è¿æ¥æ± 
const pool = mysql.createPool({
  host: process.env.DB_HOST || 'localhost',
  user: process.env.DB_USER || 'redeem_api',
  password: process.env.DB_PASSWORD || 'your_secure_password_here',
  database: process.env.DB_NAME || 'redeem_codes',
  waitForConnections: true,
  connectionLimit: 10,
  queueLimit: 0,
  enableKeepAlive: true,
  keepAliveInitialDelay: 0
});

// å¥åº·æ£€æŸ¥
app.get('/health', (req, res) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
});

// æŸ¥è¯¢å…‘æ¢ç 
app.get('/api/v1/redeem/code/:code', async (req, res) => {
  try {
    const code = req.params.code.toUpperCase();
    const [rows] = await pool.execute(
      'SELECT * FROM redeem_codes WHERE code = ?',
      [code]
    );
    
    if (rows.length === 0) {
      return res.status(404).json({ 
        success: false, 
        message: 'å…‘æ¢ç ä¸å­˜åœ¨' 
      });
    }
    
    const redeemCode = rows[0];
    res.json({
      code: redeemCode.code,
      type: redeemCode.type,
      isValid: redeemCode.is_valid === 1,
      isUsed: redeemCode.used_count > 0,
      usedByUserId: redeemCode.used_by_user_id
    });
  } catch (error) {
    console.error('æŸ¥è¯¢å…‘æ¢ç é”™è¯¯:', error);
    res.status(500).json({ 
      success: false, 
      message: 'æœåŠ¡å™¨é”™è¯¯' 
    });
  }
});

// æŸ¥è¯¢ç”¨æˆ·å…‘æ¢ç åˆ—è¡¨
app.get('/api/v1/redeem/user/:userId', async (req, res) => {
  try {
    const userId = req.params.userId;
    const [rows] = await pool.execute(
      'SELECT * FROM user_redeem_codes WHERE user_id = ?',
      [userId]
    );
    
    if (rows.length === 0) {
      return res.json({
        userId: userId,
        usedCodes: [],
        gmModeUnlocked: false,
        supporterUnlocked: false
      });
    }
    
    const userData = rows[0];
    let usedCodes = [];
    try {
      usedCodes = JSON.parse(userData.used_codes || '[]');
    } catch (e) {
      usedCodes = [];
    }
    
    res.json({
      userId: userData.user_id,
      usedCodes: usedCodes,
      gmModeUnlocked: userData.gm_mode_unlocked === 1,
      supporterUnlocked: userData.supporter_unlocked === 1
    });
  } catch (error) {
    console.error('æŸ¥è¯¢ç”¨æˆ·å…‘æ¢ç é”™è¯¯:', error);
    res.status(500).json({ 
      success: false, 
      message: 'æœåŠ¡å™¨é”™è¯¯' 
    });
  }
});

// æ£€æŸ¥å…‘æ¢ç æ˜¯å¦å·²ä½¿ç”¨
app.get('/api/v1/redeem/check', async (req, res) => {
  try {
    const { userId, code } = req.query;
    if (!userId || !code) {
      return res.status(400).json({ 
        success: false, 
        message: 'å‚æ•°ä¸å®Œæ•´' 
      });
    }
    
    const codeUpper = code.toUpperCase();
    
    // æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å·²ä½¿ç”¨
    const [userRows] = await pool.execute(
      'SELECT used_codes FROM user_redeem_codes WHERE user_id = ?',
      [userId]
    );
    
    if (userRows.length > 0) {
      let usedCodes = [];
      try {
        usedCodes = JSON.parse(userRows[0].used_codes || '[]');
      } catch (e) {
        usedCodes = [];
      }
      const isUsed = usedCodes.includes(codeUpper);
      return res.json({ isUsed });
    }
    
    res.json({ isUsed: false });
  } catch (error) {
    console.error('æ£€æŸ¥å…‘æ¢ç é”™è¯¯:', error);
    res.status(500).json({ 
      success: false, 
      message: 'æœåŠ¡å™¨é”™è¯¯' 
    });
  }
});

// ä½¿ç”¨å…‘æ¢ç 
app.post('/api/v1/redeem/use', async (req, res) => {
  const connection = await pool.getConnection();
  
  try {
    const { userId, code } = req.body;
    
    if (!userId || !code) {
      return res.status(400).json({ 
        success: false, 
        message: 'å‚æ•°ä¸å®Œæ•´' 
      });
    }
    
    const codeUpper = code.toUpperCase();
    
    // å¼€å§‹äº‹åŠ¡
    await connection.beginTransaction();
    
    try {
      // 1. æ£€æŸ¥å…‘æ¢ç æ˜¯å¦å­˜åœ¨ä¸”æœ‰æ•ˆ
      const [codeRows] = await connection.execute(
        'SELECT * FROM redeem_codes WHERE code = ? FOR UPDATE',
        [codeUpper]
      );
      
      if (codeRows.length === 0) {
        await connection.rollback();
        return res.status(404).json({ 
          success: false, 
          message: 'å…‘æ¢ç ä¸å­˜åœ¨' 
        });
      }
      
      const redeemCode = codeRows[0];
      
      if (redeemCode.is_valid !== 1) {
        await connection.rollback();
        return res.status(400).json({ 
          success: false, 
          message: 'å…‘æ¢ç æ— æ•ˆ' 
        });
      }
      
      // 2. æ£€æŸ¥æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼ˆå…¨å±€å”¯ä¸€ï¼‰
      if (redeemCode.used_count > 0 && redeemCode.used_by_user_id !== userId) {
        await connection.rollback();
        return res.status(400).json({ 
          success: false, 
          message: 'å…‘æ¢ç å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨' 
        });
      }
      
      // 3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ä½¿ç”¨è¿‡
      const [userRows] = await connection.execute(
        'SELECT * FROM user_redeem_codes WHERE user_id = ? FOR UPDATE',
        [userId]
      );
      
      let usedCodes = [];
      if (userRows.length > 0) {
        try {
          usedCodes = JSON.parse(userRows[0].used_codes || '[]');
        } catch (e) {
          usedCodes = [];
        }
        if (usedCodes.includes(codeUpper)) {
          await connection.rollback();
          return res.json({ 
            success: true, 
            message: 'å…‘æ¢ç å·²ä½¿ç”¨è¿‡' 
          });
        }
      }
      
      // 4. æ›´æ–°å…‘æ¢ç çŠ¶æ€
      await connection.execute(
        'UPDATE redeem_codes SET used_count = 1, used_by_user_id = ?, used_at = NOW() WHERE code = ?',
        [userId, codeUpper]
      );
      
      // 5. æ›´æ–°ç”¨æˆ·å…‘æ¢ç è®°å½•
      usedCodes.push(codeUpper);
      const codeType = redeemCode.type;
      const isGM = codeType === 'gm';
      const isSupporter = codeType === 'supporter';
      
      if (userRows.length > 0) {
        // æ›´æ–°ç°æœ‰è®°å½•
        await connection.execute(
          `UPDATE user_redeem_codes 
           SET used_codes = ?, 
               gm_mode_unlocked = CASE WHEN ? = 1 THEN 1 ELSE gm_mode_unlocked END,
               supporter_unlocked = CASE WHEN ? = 1 THEN 1 ELSE supporter_unlocked END,
               last_updated = NOW()
           WHERE user_id = ?`,
          [JSON.stringify(usedCodes), isGM ? 1 : 0, isSupporter ? 1 : 0, userId]
        );
      } else {
        // åˆ›å»ºæ–°è®°å½•
        await connection.execute(
          'INSERT INTO user_redeem_codes (user_id, used_codes, gm_mode_unlocked, supporter_unlocked) VALUES (?, ?, ?, ?)',
          [userId, JSON.stringify(usedCodes), isGM ? 1 : 0, isSupporter ? 1 : 0]
        );
      }
      
      await connection.commit();
      res.json({ 
        success: true, 
        message: 'å…‘æ¢æˆåŠŸ' 
      });
    } catch (error) {
      await connection.rollback();
      throw error;
    }
  } catch (error) {
    console.error('ä½¿ç”¨å…‘æ¢ç é”™è¯¯:', error);
    res.status(500).json({ 
      success: false, 
      message: 'æœåŠ¡å™¨é”™è¯¯' 
    });
  } finally {
    connection.release();
  }
});

// é”™è¯¯å¤„ç†
app.use((err, req, res, next) => {
  console.error('æœªå¤„ç†çš„é”™è¯¯:', err);
  res.status(500).json({ 
    success: false, 
    message: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' 
  });
});

// å¯åŠ¨æœåŠ¡å™¨
const PORT = process.env.PORT || 3000;
app.listen(PORT, '0.0.0.0', () => {
  console.log(`å…‘æ¢ç APIæœåŠ¡è¿è¡Œåœ¨ç«¯å£ ${PORT}`);
  console.log(`å¥åº·æ£€æŸ¥: http://localhost:${PORT}/health`);
});
EOF
```

### 3.5 åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

```bash
cat > .env << 'EOF'
DB_HOST=localhost
DB_USER=redeem_api
DB_PASSWORD=your_secure_password_here
DB_NAME=redeem_codes
PORT=3000
EOF

# ä¿®æ”¹å¯†ç ä¸ºå®é™…å¯†ç 
nano .env
```

### 3.6 å®‰è£…PM2è¿›ç¨‹ç®¡ç†å™¨

```bash
npm install -g pm2

# å¯åŠ¨æœåŠ¡
pm2 start server.js --name redeem-api

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 save
pm2 startup
# æ‰§è¡Œä¸Šé¢å‘½ä»¤è¾“å‡ºçš„å‘½ä»¤ï¼ˆé€šå¸¸æ˜¯ sudo env PATH=... pm2 startup systemd -u root --hp /rootï¼‰
```

## ğŸŒ ç¬¬å››æ­¥ï¼šé…ç½®Nginxåå‘ä»£ç†

### 4.1 å®‰è£…Nginx

```bash
apt-get install -y nginx
systemctl start nginx
systemctl enable nginx
```

### 4.2 é…ç½®Nginx

```bash
cat > /etc/nginx/sites-available/redeem-api << 'EOF'
server {
    listen 80;
    server_name your-domain.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸåæˆ–IP
    
    # å¦‚æœä½¿ç”¨IPè®¿é—®ï¼Œå¯ä»¥æ³¨é‡Šæ‰server_nameï¼Œæˆ–ä½¿ç”¨ _ è¡¨ç¤ºæ‰€æœ‰åŸŸå
    # server_name _;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
EOF

# åˆ›å»ºè½¯é“¾æ¥
ln -s /etc/nginx/sites-available/redeem-api /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
nginx -t

# é‡å¯Nginx
systemctl restart nginx
```

### 4.3 é…ç½®é˜²ç«å¢™

```bash
# å¼€æ”¾80å’Œ443ç«¯å£
ufw allow 80/tcp
ufw allow 443/tcp
ufw allow 22/tcp  # SSH
ufw enable
```

## ğŸ”’ ç¬¬äº”æ­¥ï¼šé…ç½®HTTPSï¼ˆæ¨èï¼‰

### 5.1 å®‰è£…Certbot

```bash
apt-get install -y certbot python3-certbot-nginx
```

### 5.2 ç”³è¯·SSLè¯ä¹¦

```bash
# å¦‚æœæœ‰åŸŸå
certbot --nginx -d your-domain.com

# å¦‚æœæ²¡æœ‰åŸŸåï¼Œå¯ä»¥è·³è¿‡HTTPSï¼Œç›´æ¥ä½¿ç”¨HTTP
```

## âœ… ç¬¬å…­æ­¥ï¼šæµ‹è¯•API

### 6.1 æµ‹è¯•å¥åº·æ£€æŸ¥

```bash
curl http://your-server-ip/health
# æˆ–
curl http://your-domain.com/health
```

åº”è¯¥è¿”å›ï¼š
```json
{"status":"ok","timestamp":"2025-01-XX..."}
```

### 6.2 æµ‹è¯•æŸ¥è¯¢å…‘æ¢ç 

```bash
curl http://your-server-ip/api/v1/redeem/code/SUPPORTER001
```

### 6.3 æµ‹è¯•ä½¿ç”¨å…‘æ¢ç 

```bash
curl -X POST http://your-server-ip/api/v1/redeem/use \
  -H "Content-Type: application/json" \
  -d '{"userId":"test_user_123","code":"SUPPORTER001"}'
```

## ğŸ“± ç¬¬ä¸ƒæ­¥ï¼šé…ç½®Androidå®¢æˆ·ç«¯

### 7.1 ä¿®æ”¹BASE_URL

ç¼–è¾‘ `app/src/main/java/com/example/yjcy/utils/DomesticRedeemCodeManager.kt`ï¼š

```kotlin
// ä¿®æ”¹è¿™ä¸€è¡Œ
private const val BASE_URL = "http://your-server-ip/api/v1/redeem"
// æˆ–ä½¿ç”¨åŸŸå
private const val BASE_URL = "https://your-domain.com/api/v1/redeem"
```

### 7.2 åœ¨AndroidManifest.xmlä¸­æ·»åŠ ç½‘ç»œæƒé™

```xml
<uses-permission android:name="android.permission.INTERNET" />
```

### 7.3 æ›¿æ¢Firebaseè°ƒç”¨

åœ¨ `MainActivity.kt` ä¸­ï¼Œå°† `FirebaseRedeemCodeManager` æ›¿æ¢ä¸º `DomesticRedeemCodeManager`ã€‚

## ğŸ” ç¬¬å…«æ­¥ï¼šç›‘æ§å’Œæ—¥å¿—

### 8.1 æŸ¥çœ‹PM2æ—¥å¿—

```bash
pm2 logs redeem-api
```

### 8.2 æŸ¥çœ‹Nginxæ—¥å¿—

```bash
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### 8.3 é‡å¯æœåŠ¡

```bash
pm2 restart redeem-api
systemctl restart nginx
```

## ğŸ“Š å¸¸è§é—®é¢˜

### Q: æ— æ³•è¿æ¥æ•°æ®åº“ï¼Ÿ
A: æ£€æŸ¥MySQLæ˜¯å¦è¿è¡Œï¼š`systemctl status mysql`
   æ£€æŸ¥ç”¨æˆ·æƒé™ï¼š`mysql -u redeem_api -p`

### Q: APIè¿”å›500é”™è¯¯ï¼Ÿ
A: æŸ¥çœ‹PM2æ—¥å¿—ï¼š`pm2 logs redeem-api`
   æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®

### Q: Nginx 502é”™è¯¯ï¼Ÿ
A: æ£€æŸ¥Node.jsæœåŠ¡æ˜¯å¦è¿è¡Œï¼š`pm2 list`
   æ£€æŸ¥ç«¯å£3000æ˜¯å¦ç›‘å¬ï¼š`netstat -tlnp | grep 3000`

### Q: å¦‚ä½•æ›´æ–°ä»£ç ï¼Ÿ
A: 
```bash
cd /opt/redeem-api
# ä¿®æ”¹server.js
pm2 restart redeem-api
```

## ğŸ¯ å®Œæˆï¼

ç°åœ¨ä½ çš„APIåº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚åœ¨Androidå®¢æˆ·ç«¯ä¸­é…ç½®å¥½BASE_URLåï¼Œå°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼

