# 客服中心功能说明

## 功能概述

客服中心是游戏中新增的重要功能，位于项目管理界面左上角，与宣传中心并列。当玩家的游戏发售后，每月会随机生成客诉问题，需要及时安排客服员工处理，否则会导致粉丝流失。

## 核心机制

### 1. 客诉生成规则

**生成时机**：每月月初（每月1日）

**生成概率**：
- **单机游戏**：30%概率生成客诉
- **网络游戏**：50%概率生成客诉（玩家基数大，问题更多）

**生成数量**：每个游戏每月可能生成1-2个客诉

### 2. 客诉严重程度

客诉分为三个严重程度等级，决定了需要的处理工作量和惩罚力度：

| 严重程度 | 概率 | 工作量 | 超时期限 | 每日粉丝损失 |
|---------|------|--------|---------|-------------|
| **低**   | 50%  | 100    | 7天     | 10粉丝/天   |
| **中**   | 35%  | 250    | 5天     | 25粉丝/天   |
| **高**   | 15%  | 500    | 3天     | 50粉丝/天   |

**惩罚机制**：
- 客诉在超时期限内未完成，开始每天扣除粉丝
- 超时第1天开始扣除，持续累积直到处理完成
- 例：高严重度客诉第4天未完成，当天扣50粉丝，第5天再扣50粉丝...

### 3. 客诉类型

根据游戏类型，客诉类型分布不同：

**网络游戏可能出现的客诉**：
- 🐛 游戏Bug（25%）
- ⚖️ 平衡性问题（20%）
- 📝 内容不满意（20%）
- 🖥️ 服务器问题（15%）
- 💰 付费争议（10%）
- ❓ 其他问题（10%）

**单机游戏可能出现的客诉**：
- 🐛 游戏Bug（35%）
- ⚖️ 平衡性问题（30%）
- 📝 内容不满意（30%）
- ❓ 其他问题（5%）

### 4. 客服处理速度

处理速度由客服的**服务技能等级**决定：

| 技能等级 | 每日处理量 | 处理低/中/高严重度所需天数 |
|---------|-----------|-------------------------|
| **Lv.1** | 50/天     | 2天 / 5天 / 10天        |
| **Lv.2** | 65/天     | 1.5天 / 3.8天 / 7.7天   |
| **Lv.3** | 85/天     | 1.2天 / 2.9天 / 5.9天   |
| **Lv.4** | 110/天    | 0.9天 / 2.3天 / 4.5天   |
| **Lv.5** | 140/天    | 0.7天 / 1.8天 / 3.6天   |

**计算公式**：
- 基础处理量：50/天
- Lv.1倍率：1.0倍
- Lv.2倍率：1.3倍
- Lv.3倍率：1.7倍
- Lv.4倍率：2.2倍
- Lv.5倍率：2.8倍

## 使用流程

### 1. 查看客诉

1. 进入**项目管理**界面
2. 点击左上角的**📞 客服中心**按钮
3. 查看当前所有待处理和处理中的客诉

### 2. 分配客服

1. 在客诉列表中找到待处理的客诉
2. 点击**分配客服**按钮
3. 从可用客服列表中选择合适的员工
4. 系统会显示预计完成天数供参考

### 3. 监控进度

- 客诉卡片会实时显示处理进度百分比
- 显示当前工作量进度（如：150/250）
- 超时客诉会以红色背景警告
- 显示已存在天数和剩余期限

### 4. 取消分配

如果需要更换客服，可以：
1. 点击**取消分配**按钮
2. 重新分配新的客服员工
3. 已处理的进度会保留

## 数值平衡

### 典型场景分析

**场景1：前期应对（1个Lv.1客服）**
- 低严重度：2天完成，不会超时 ✅
- 中严重度：5天完成，可能超时但损失可控 ⚠️
- 高严重度：10天完成，严重超时，损失约350粉丝 ❌

**场景2：中期应对（2个Lv.2客服）**
- 可同时处理2个客诉
- 低严重度：1.5天完成 ✅
- 中严重度：3.8天完成 ✅
- 高严重度：7.7天完成，可能轻微超时 ⚠️

**场景3：后期应对（3个Lv.4+客服）**
- 可同时处理3个客诉
- 所有严重度都能在期限内完成 ✅
- 能够应对高频率的客诉生成

### 粉丝损失示例

**高严重度客诉处理失败**：
- 第1-3天：0损失（期限内）
- 第4天：-50粉丝
- 第5天：-50粉丝
- 第6天：-50粉丝
- ...持续到处理完成

**多个客诉同时超时**：
- 1个低+1个中同时超时：每天-35粉丝
- 2个高同时超时：每天-100粉丝
- 影响非常严重，需要及时处理

## 策略建议

### 人员配置建议

**初期（1-2个游戏）**：
- 至少配置1个Lv.1客服
- 足以应对偶发的低中严重度客诉

**中期（3-5个游戏）**：
- 配置2-3个Lv.2+客服
- 能够同时处理多个客诉
- 建议培养至少1个Lv.3+高级客服

**后期（5+个游戏）**：
- 配置3-5个Lv.3+客服
- 确保能够应对高频客诉生成
- 重点培养Lv.4和Lv.5精英客服

### 处理优先级

1. **高严重度客诉**：优先处理（期限短，损失大）
2. **即将超时的客诉**：次优先
3. **低严重度客诉**：时间充裕，可以排队处理

### 技能培养建议

**快速成长路线**：
- 直接招聘Lv.2客服（薪资20,000）
- 逐步培养至Lv.3（处理速度提升30%）
- 长期目标Lv.4（处理速度翻倍）

**性价比路线**：
- 招聘Lv.1客服（薪资10,000）
- 通过工作经验逐步提升
- 成本低但成长周期较长

## UI功能详解

### 客服中心主界面

**顶部统计卡片**：
- ⏳ 待处理：未分配客服的客诉数量
- 🔧 处理中：已分配客服正在处理的数量
- ✅ 本月完成：本月已完成的客诉数量
- 客服人员数：当前可用客服数量

**客诉卡片信息**：
- 游戏名称和客诉类型图标
- 严重程度标签（绿/橙/红）
- 处理进度条和百分比
- 存在天数和超时状态
- 分配的客服信息
- 操作按钮（分配/取消分配）

### 分配客服对话框

**客诉信息区**：
- 显示客诉详细信息
- 需要处理的工作量

**客服选择区**：
- 列出所有具有服务技能的员工
- 显示服务技能等级
- 显示每日处理速度
- 显示预计完成天数
- 点击卡片即可分配

## 技术实现

### 核心文件

1. **GameData.kt**
   - `ComplaintSeverity`：严重程度枚举
   - `ComplaintType`：客诉类型枚举
   - `ComplaintStatus`：客诉状态枚举
   - `Complaint`：客诉数据类

2. **CustomerServiceManager.kt**
   - `generateMonthlyComplaints()`：月度客诉生成
   - `assignEmployee()`：分配员工
   - `processDailyComplaints()`：每日处理逻辑
   - `calculateOverdueFanLoss()`：计算粉丝损失

3. **CustomerServiceContent.kt**
   - 客服中心UI界面
   - 客诉卡片组件
   - 分配对话框组件

4. **EnhancedProjectManagement.kt**
   - 集成客服中心按钮
   - 客服中心全屏对话框

5. **MainActivity.kt**
   - 月结算集成客诉生成
   - 每日结算集成客诉处理和粉丝扣减
   - 状态管理和数据传递

### 数据流转

```
月结算（每月1日）
  ↓
CustomerServiceManager.generateMonthlyComplaints()
  ↓
生成新客诉 → complaints列表更新
  ↓
UI显示 → 玩家查看和分配

每日结算（每天）
  ↓
CustomerServiceManager.processDailyComplaints()
  ↓
更新处理进度 → 标记已完成客诉
  ↓
CustomerServiceManager.calculateOverdueFanLoss()
  ↓
扣除粉丝（如果超时）
```

## 未来扩展方向

1. **第二玩法**：可以添加主动客服功能（如客户满意度调查）
2. **成就系统**：零客诉月份、处理100个客诉等成就
3. **高级功能**：客服团队、自动分配系统
4. **数据统计**：客诉历史记录、处理效率分析

## 总结

客服中心功能为游戏增加了新的策略深度：
- ✅ 需要合理配置客服人员
- ✅ 需要培养员工的服务技能
- ✅ 需要权衡处理优先级
- ✅ 增加了游戏后期的管理挑战
- ✅ 体现了游戏公司运营的真实性

数值平衡合理，既有挑战性又不会过于惩罚性，符合游戏整体的数值设计理念。
