# ç½‘æ¸¸æ€»æ³¨å†Œé€»è¾‘ä¿®å¤è¯´æ˜

## ğŸ“‹ ä¿®å¤æ—¥æœŸ
2025å¹´10æœˆ18æ—¥

## ğŸ› å‘ç°çš„é—®é¢˜

### 1. é¦–æ—¥æ³¨å†Œé€»è¾‘é”™è¯¯
**é—®é¢˜æè¿°**ï¼š
- ä»£ç æ ¹æ® `releasePrice` åˆ¤æ–­é¦–æ—¥æ³¨å†Œ/é”€é‡äººæ•°
- ç½‘æ¸¸çš„ `releasePrice = 0`ï¼Œä¼šè¢«é”™è¯¯å½’ç±»ä¸º"ä½ä»·æ¸¸æˆ"
- å¯¼è‡´ç½‘æ¸¸å’Œä½ä»·å•æœºæ¸¸æˆä½¿ç”¨ç›¸åŒçš„é¦–æ—¥æ³¨å†Œé€»è¾‘

**å½±å“**ï¼š
- ç½‘æ¸¸é¦–æ—¥æ³¨å†Œäººæ•°ä¸º 800-1200äººï¼Œä¸é¢„æœŸçš„å…è´¹æ¸¸æˆæ³¨å†Œé‡ä¸ç¬¦

### 2. é¦–æ—¥ç¼ºå°‘ä»˜è´¹å†…å®¹æ”¶ç›Š
**é—®é¢˜æè¿°**ï¼š
- ç½‘æ¸¸é¦–æ—¥åªè®¡ç®—äº†é”€å”®æ”¶ç›Šï¼ˆæ°¸è¿œä¸º0ï¼‰
- æ²¡æœ‰è®¡ç®—é¦–æ—¥çš„ä»˜è´¹å†…å®¹æ”¶ç›Š
- åªæœ‰ä»ç¬¬äºŒå¤©å¼€å§‹æ‰è®¡ç®—ä»˜è´¹å†…å®¹æ”¶ç›Š

**å½±å“**ï¼š
- é¦–æ—¥æ”¶ç›Šç»Ÿè®¡ä¸å‡†ç¡®ï¼Œç¼ºå°‘ä»˜è´¹å†…å®¹æ”¶ç›Š

### 3. æ¯æ—¥æ–°å¢æœªç´¯åŠ åˆ° totalRegisteredPlayers
**é—®é¢˜æè¿°**ï¼š
- è™½ç„¶æ¯å¤©æœ‰æ–°å¢ `sales`ï¼ˆä»£è¡¨æ–°æ³¨å†Œç©å®¶ï¼‰
- ä½† `totalRegisteredPlayers` å­—æ®µåªåœ¨é¦–æ—¥åˆå§‹åŒ–ï¼Œåç»­ä¸æ›´æ–°
- å¯¼è‡´ `totalRegisteredPlayers` ä¸å®é™…ç´¯è®¡æ³¨å†Œäººæ•°ä¸ç¬¦

**å½±å“**ï¼š
- `getActivePlayers` è®¡ç®—é”™è¯¯ï¼Œæ´»è·ƒç©å®¶æ•°ä¸å‡†ç¡®

### 4. ç½‘æ¸¸æ¯æ—¥æ–°å¢é€»è¾‘ä¸åˆç†
**é—®é¢˜æè¿°**ï¼š
- ç½‘æ¸¸ä½¿ç”¨ä¸å•æœºæ¸¸æˆç›¸åŒçš„è¡°å‡æ¨¡å¼ï¼ˆæ¯å¤©è¡°å‡2%ï¼‰
- å…è´¹ç½‘æ¸¸çš„æ–°å¢æ³¨å†Œåº”è¯¥åŸºäºç©å®¶å…´è¶£å€¼ï¼Œè€Œä¸æ˜¯è¡°å‡

**å½±å“**ï¼š
- ç½‘æ¸¸æ³¨å†Œäººæ•°å˜åŒ–è¶‹åŠ¿ä¸ç¬¦åˆå…è´¹æ¸¸æˆçš„å¢é•¿è§„å¾‹

## âœ… ä¿®å¤å†…å®¹

### ä¿®å¤1ï¼šé¦–æ—¥æ³¨å†Œé€»è¾‘ä¼˜åŒ–
```kotlin
// é¦–æ—¥é”€é‡/æ³¨å†Œï¼šæ ¹æ®å•†ä¸šæ¨¡å¼è°ƒæ•´
val baseSales = if (businessModel == ONLINE_GAME) {
    // ç½‘æ¸¸ï¼šå…è´¹æ¸¸æˆï¼Œé¦–æ—¥æ³¨å†Œäººæ•°è¾ƒå¤š
    Random.nextInt(1000, 2000)
} else {
    // å•æœºï¼šæ ¹æ®ä»·æ ¼è°ƒæ•´é¦–æ—¥é”€é‡
    when {
        gameRevenue.releasePrice <= 30.0 -> Random.nextInt(800, 1200)
        gameRevenue.releasePrice <= 100.0 -> Random.nextInt(500, 800)
        else -> Random.nextInt(200, 500)
    }
}
```

**æ”¹è¿›**ï¼š
- æ ¹æ®å•†ä¸šæ¨¡å¼è€Œéä»·æ ¼åˆ¤æ–­
- ç½‘æ¸¸é¦–æ—¥æ³¨å†Œï¼š1000-2000äºº
- å•æœºæ¸¸æˆé¦–æ—¥é”€é‡ï¼šæ ¹æ®å®šä»· 200-1200äºº

### ä¿®å¤2ï¼šé¦–æ—¥ä»˜è´¹å†…å®¹æ”¶ç›Šè®¡ç®—
```kotlin
// è®¡ç®—é¦–æ—¥ä»˜è´¹å†…å®¹æ”¶ç›Šï¼ˆä»…ç½‘æ¸¸ï¼‰
val monetizationItems = gameInfoMap[gameId]?.second ?: emptyList()
var firstDayMonetizationRevenue = 0.0
val initialMonetizationRevenues = if (businessModel == ONLINE_GAME) {
    val dailyRevenues = calculateMonetizationRevenues(baseSales, monetizationItems)
    firstDayMonetizationRevenue = dailyRevenues.sumOf { it.totalRevenue }
    dailyRevenues
} else {
    emptyList()
}

// ç½‘æ¸¸è¿”å›æ€»æ”¶ç›Šï¼ˆé”€å”®æ”¶ç›Š + ä»˜è´¹å†…å®¹æ”¶ç›Šï¼‰
return firstDayRevenue + firstDayMonetizationRevenue
```

**æ”¹è¿›**ï¼š
- ç½‘æ¸¸é¦–æ—¥å³è®¡ç®—ä»˜è´¹å†…å®¹æ”¶ç›Š
- è¿”å›å€¼åŒ…å«å®Œæ•´çš„é¦–æ—¥æ”¶ç›Š

### ä¿®å¤3ï¼šæ¯æ—¥ç´¯åŠ  totalRegisteredPlayers
```kotlin
// ç½‘æ¸¸ï¼šæ›´æ–°æ€»æ³¨å†Œäººæ•°ï¼ˆç´¯åŠ æ¯æ—¥æ–°å¢ï¼‰
val newTotalRegisteredPlayers = if (businessModel == ONLINE_GAME) {
    gameRevenue.totalRegisteredPlayers + newSales
} else {
    gameRevenue.totalRegisteredPlayers
}

gameRevenueMap[gameId] = gameRevenue.copy(
    dailySalesList = updatedDailySalesList,
    monetizationRevenues = monetizationRevenues,
    totalRegisteredPlayers = newTotalRegisteredPlayers
)
```

**æ”¹è¿›**ï¼š
- æ¯å¤©ç´¯åŠ æ–°å¢æ³¨å†Œåˆ° `totalRegisteredPlayers`
- ç¡®ä¿è¯¥å­—æ®µå§‹ç»ˆåæ˜ çœŸå®çš„æ€»æ³¨å†Œäººæ•°

### ä¿®å¤4ï¼šç½‘æ¸¸æ¯æ—¥æ–°å¢æ³¨å†Œä¼˜åŒ–
```kotlin
// è®¡ç®—æ–°å¢é”€é‡/æ³¨å†Œ
val newSales = if (businessModel == ONLINE_GAME) {
    // ç½‘æ¸¸ï¼šåŸºäºç©å®¶å…´è¶£å€¼è®¡ç®—æ–°å¢æ³¨å†Œ
    val baseNewRegistrations = (latestSales.sales * 0.05).toInt() // åŸºç¡€5%å¢é•¿
    val interestMultiplier = (gameRevenue.playerInterest / 100.0) // å…´è¶£å€¼å½±å“
    val fluctuation = Random.nextDouble(0.8, 1.5) // éšæœºæ³¢åŠ¨
    (baseNewRegistrations * interestMultiplier * fluctuation).toInt().coerceAtLeast(10)
} else {
    // å•æœºï¼šé”€é‡è¡°å‡æ¨¡å¼
    val decayFactor = 0.98
    val fluctuation = Random.nextDouble(0.8, 1.2)
    (latestSales.sales * decayFactor * fluctuation).toInt().coerceAtLeast(1)
}
```

**æ”¹è¿›**ï¼š
- ç½‘æ¸¸ä½¿ç”¨å¢é•¿æ¨¡å¼ï¼ˆåŸºç¡€5%å¢é•¿ï¼‰
- å—ç©å®¶å…´è¶£å€¼å½±å“ï¼ˆå…´è¶£å€¼é«˜=æ–°å¢å¤šï¼‰
- å•æœºæ¸¸æˆä¿æŒè¡°å‡æ¨¡å¼

### ä¿®å¤5ï¼šæ´»è·ƒç©å®¶è®¡ç®—ä¼˜åŒ–
```kotlin
fun getActivePlayers(gameId: String): Int {
    // ...
    // åŸºç¡€æ´»è·ƒç©å®¶ = æ€»æ³¨å†Œäººæ•° * 40%ï¼ˆæ³¨å†Œç©å®¶ä¸­40%ä¿æŒæ´»è·ƒï¼‰
    val baseActivePlayers = (gameRevenue.totalRegisteredPlayers * 0.4).toInt()
    
    // æ ¹æ®å…´è¶£å€¼è°ƒæ•´æ´»è·ƒç©å®¶æ•°
    val interestMultiplier = calculateActivePlayerMultiplier(gameRevenue.playerInterest)
    
    return (baseActivePlayers * interestMultiplier).toInt()
}
```

**æ”¹è¿›**ï¼š
- ä½¿ç”¨ `totalRegisteredPlayers` è€Œé `totalSales`
- è®¡ç®—æ›´å‡†ç¡®ï¼Œåæ˜ çœŸå®æ´»è·ƒæƒ…å†µ

## ğŸ“Š ä¿®å¤åçš„æ•°æ®æµ

### ç½‘æ¸¸æ³¨å†Œäººæ•°å˜åŒ–
```
é¦–æ—¥ï¼š1000-2000äººï¼ˆé¦–æ¬¡æ³¨å†Œï¼‰
â†“
æ¯æ—¥æ–°å¢ = å‰æ—¥æ³¨å†Œ Ã— 5% Ã— å…´è¶£å€¼å€æ•° Ã— éšæœºæ³¢åŠ¨
â†“
æ€»æ³¨å†Œ = é¦–æ—¥ + æ‰€æœ‰æ¯æ—¥æ–°å¢
â†“
æ´»è·ƒç©å®¶ = æ€»æ³¨å†Œ Ã— 40% Ã— å…´è¶£å€¼å€æ•°
```

### ç½‘æ¸¸æ”¶ç›Šè®¡ç®—
```
æ¯æ—¥æ”¶ç›Š = é”€å”®æ”¶ç›Šï¼ˆ0ï¼‰+ ä»˜è´¹å†…å®¹æ”¶ç›Š
â†“
ä»˜è´¹å†…å®¹æ”¶ç›Š = Î£(æ´»è·ƒç©å®¶æ•° Ã— ä»˜è´¹ç‡ Ã— å•ä»·)
â†“
æ€»æ”¶ç›Š = Î£æ‰€æœ‰æ¯æ—¥æ”¶ç›Š
```

## ğŸ¯ é¢„æœŸæ•ˆæœ

1. **ç½‘æ¸¸é¦–æ—¥æ³¨å†Œæ•°**ï¼š1000-2000äººï¼ˆç¬¦åˆå…è´¹æ¸¸æˆç‰¹å¾ï¼‰
2. **æ³¨å†Œäººæ•°å¢é•¿**ï¼šåŸºäºå…´è¶£å€¼çš„å¢é•¿æ¨¡å¼ï¼ˆè€Œéè¡°å‡ï¼‰
3. **æ€»æ³¨å†Œå‡†ç¡®æ€§**ï¼š`totalRegisteredPlayers` å§‹ç»ˆå‡†ç¡®
4. **æ´»è·ƒç©å®¶å‡†ç¡®æ€§**ï¼šåŸºäºçœŸå®æ€»æ³¨å†Œæ•°è®¡ç®—
5. **é¦–æ—¥æ”¶ç›Šå®Œæ•´**ï¼šåŒ…å«ä»˜è´¹å†…å®¹æ”¶ç›Š

## ğŸ“ ç›¸å…³æ–‡ä»¶

- `d:\AI\Yjcy\app\src\main\java\com\example\yjcy\data\GameRevenueData.kt`
  - `addDailyRevenueForGame()` å‡½æ•°ï¼ˆç¬¬747-902è¡Œï¼‰
  - `getActivePlayers()` å‡½æ•°ï¼ˆç¬¬1188-1204è¡Œï¼‰

## ğŸ” æµ‹è¯•å»ºè®®

1. åˆ›å»ºä¸€ä¸ªç½‘æ¸¸é¡¹ç›®å¹¶ä¸Šçº¿
2. æ£€æŸ¥é¦–æ—¥æ³¨å†Œäººæ•°æ˜¯å¦åœ¨ 1000-2000 èŒƒå›´
3. æ£€æŸ¥é¦–æ—¥æ”¶ç›Šæ˜¯å¦åŒ…å«ä»˜è´¹å†…å®¹æ”¶ç›Š
4. è¿‡å‡ å¤©åæ£€æŸ¥æ€»æ³¨å†Œæ˜¯å¦æ­£ç¡®ç´¯åŠ 
5. éªŒè¯æ´»è·ƒç©å®¶æ•°æ˜¯å¦åˆç†ï¼ˆçº¦ä¸ºæ€»æ³¨å†Œçš„40% Ã— å…´è¶£å€¼å€æ•°ï¼‰
