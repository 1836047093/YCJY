# 岗位发布系统 - 快速开始指南

## 5分钟快速集成

### 步骤1: 替换人才市场对话框

找到调用 `TalentMarketDialog` 的地方（通常在 `EmployeeManagementContent.kt`），替换为新的对话框：

```kotlin
// 替换前
if (showTalentMarket) {
    TalentMarketDialog(
        saveData = saveData,
        onDismiss = { showTalentMarket = false },
        onRecruitCandidate = { candidate ->
            // 雇佣逻辑
        }
    )
}

// 替换后
if (showTalentMarket) {
    NewTalentMarketDialog(
        saveData = saveData,
        onDismiss = { showTalentMarket = false },
        onRecruitCandidate = { candidate ->
            // 雇佣逻辑保持不变
        }
    )
}
```

### 步骤2: 集成时间推进

在游戏的时间推进逻辑中添加应聘者生成：

```kotlin
// 在 MainActivity.kt 或游戏主循环中
fun onGameDayAdvance() {
    // 推进游戏时间
    gameDay++
    
    // 生成新的应聘者
    val jobPostingService = JobPostingService.getInstance()
    jobPostingService.generateApplicantsForActiveJobs(daysElapsed = 1)
    
    // 可选：显示通知
    val pending = jobPostingService.getTotalPendingApplicants()
    if (pending > 0) {
        showNotification("有 $pending 位应聘者待处理")
    }
}
```

### 步骤3: 导入新组件

在使用的文件顶部添加导入：

```kotlin
import com.example.yjcy.ui.components.NewTalentMarketDialog
import com.example.yjcy.service.JobPostingService
```

## 基本使用流程

### 1. 玩家发布岗位

```
打开人才市场 → 点击 + 按钮 → 填写岗位信息 → 发布
```

- 选择岗位类型（程序员、策划师等）
- 设置最低技能等级（1-5级）
- 设置薪资范围（¥3,000 - ¥50,000）

### 2. 系统生成应聘者

```
时间推进 → 自动生成符合要求的应聘者 → 显示在岗位列表中
```

应聘者生成规则：
- 每天每个活跃岗位可能产生 0-3 位应聘者
- 薪资越高，应聘者越多
- 技能要求越低，应聘者越多

### 3. 玩家处理应聘者

```
查看岗位 → 选择应聘者 → 选择面试方式 → 面试 → 雇佣
```

**玩家面试**：
- 查看候选人完整技能
- 添加面试备注
- 直接决定录用/拒绝

**人事面试**：
- 系统自动评估
- 60分及格自动通过
- 生成面试报告

### 4. 雇佣员工

```
通过面试的应聘者 → 点击"雇佣"按钮 → 成功加入团队
```

## 完整示例代码

```kotlin
@Composable
fun YourGameScreen(saveData: SaveData) {
    var showTalentMarket by remember { mutableStateOf(false) }
    val jobPostingService = remember { JobPostingService.getInstance() }
    
    // 显示待处理应聘者数量
    val pendingCount = jobPostingService.getTotalPendingApplicants()
    
    Column {
        // 你的其他UI
        
        // 人才市场按钮
        Button(onClick = { showTalentMarket = true }) {
            Text("人才市场")
            if (pendingCount > 0) {
                Badge { Text("$pendingCount") }
            }
        }
    }
    
    // 人才市场对话框
    if (showTalentMarket) {
        NewTalentMarketDialog(
            saveData = saveData,
            onDismiss = { showTalentMarket = false },
            onRecruitCandidate = { candidate ->
                // 转换为员工
                val newEmployee = candidate.toEmployee(
                    newId = saveData.allEmployees.size + 1
                )
                
                // 扣除费用（基础费用 + 技能加成）
                val cost = 5000L + candidate.getMaxSkillLevel() * 2000L
                saveData.money -= cost
                
                // 添加到团队
                saveData.allEmployees = saveData.allEmployees + newEmployee
                
                // 显示成功消息
                showToast("成功雇佣 ${candidate.name}")
            }
        )
    }
}
```

## 测试新系统

### 测试步骤

1. **启动游戏并打开人才市场**
   - 应该看到空的岗位列表
   - 顶部显示"还没有发布岗位"

2. **发布第一个岗位**
   - 点击 + 按钮
   - 选择"程序员"岗位
   - 设置最低技能等级为 3
   - 设置薪资范围 ¥8,000 - ¥15,000
   - 点击"发布岗位"

3. **等待应聘者（或手动刷新）**
   - 点击刷新按钮
   - 应该看到岗位卡片显示有应聘者

4. **查看并面试应聘者**
   - 点击岗位卡片
   - 看到应聘者列表
   - 选择一个应聘者，点击"面试"
   - 选择"玩家面试"或"人事面试"
   - 查看面试结果

5. **雇佣员工**
   - 通过面试的应聘者显示"已通过"
   - 点击"雇佣"按钮
   - 候选人成功加入团队

## 常见问题

### Q: 为什么没有应聘者？
A: 
- 确保岗位状态是"招聘中"
- 尝试点击刷新按钮
- 或调用 `jobPostingService.generateApplicantsForActiveJobs(1)`

### Q: 如何调整应聘者生成频率？
A: 修改 `JobPostingService.kt` 中的 `calculateApplicantCount` 函数

### Q: 如何修改面试评分标准？
A: 修改 `JobPostingService.kt` 中的 `conductHRInterview` 函数

### Q: 如何保存岗位数据？
A: 需要将 `JobPostingService` 的数据集成到 `SaveData` 存档系统中

## 下一步

- ✅ 基本功能已完成
- 🔄 集成到存档系统
- 🔄 添加岗位有效期
- 🔄 添加招聘成本
- 🔄 优化UI动画和过渡效果

## 需要帮助？

查看完整文档：`岗位发布系统重构说明.md`

