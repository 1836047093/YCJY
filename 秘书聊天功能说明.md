# 秘书聊天功能说明

## 功能概述

新增了一个秘书聊天系统，玩家可以在主菜单点击秘书头像，进入聊天界面与秘书进行文字互动。

## 核心功能

### 1. **主菜单秘书入口**
- 位置：主菜单Logo下方，功能按钮上方
- 设计：圆形头像按钮（👩‍💼），粉色渐变背景
- 点击后进入秘书聊天界面

### 2. **聊天界面UI**
- **顶部导航栏**：
  - 秘书头像 + 名称
  - 在线状态指示（绿色圆点）
  - 返回按钮

- **消息列表**：
  - 秘书消息：左侧，白色气泡
  - 玩家消息：右侧，紫色渐变气泡
  - 每条消息显示发送时间（HH:mm格式）
  - 支持自动滚动到最新消息

- **输入框区域**：
  - 多行文本输入框（最多4行）
  - 发送按钮（紫色渐变圆形按钮）
  - 发送按钮在输入框为空时禁用

### 3. **秘书自动回复系统**

#### 欢迎消息
- 进入聊天界面时，秘书自动发送："老板，您好！"

#### 智能回复逻辑
秘书会根据玩家消息内容进行智能回复：

**关键词匹配**（40+种预设回复）：
- 问候类：你好、早上好、中午好、晚上好、晚安
- 礼貌类：谢谢、辛苦了
- 工作类：帮忙、公司、游戏、员工、资金、收益、销量
- 互动类：漂亮、可爱、聪明、能干、厉害
- 告别类：再见、拜拜
- 其他：天气、吃饭、休息、忙、累等

**标点符号识别**：
- 问号（?、？）：触发疑问回复
- 感叹号（!、！）：触发肯定回复

**默认回复**：
- 8种通用回复语（随机选择）

#### 打字效果
- 玩家发送消息后，秘书会显示"正在输入"动画
- 延迟时间：800ms + 消息长度×50ms（最多2秒）
- 打字动画：3个闪烁的灰色圆点

### 4. **动画效果**
- 消息出现：淡入 + 上滑动画
- 消息列表：平滑滚动
- 打字指示器：循环闪烁动画

## 技术实现

### 核心文件

1. **ChatMessage.kt** - 数据模型
   - `ChatMessage`：聊天消息数据类
   - `MessageSender`：发送者类型枚举
   - `SecretaryReplyManager`：自动回复管理器

2. **SecretaryChatScreen.kt** - UI界面
   - `SecretaryChatScreen`：主聊天界面
   - `ChatMessageItem`：消息气泡组件
   - `ChatInputBar`：输入框组件
   - `TypingIndicator`：打字中指示器

3. **MainActivity.kt** - 路由配置
   - 添加 `secretary_chat` 路由
   - 主菜单添加秘书入口按钮

## 设计特点

### 视觉设计
- **秘书主题色**：粉色渐变（#FF6B9D → #C06C84）
- **玩家主题色**：紫色渐变（#667eea → #764ba2）
- **背景色**：浅灰色（#F5F5F5）

### 用户体验
- ✅ 自动滚动到最新消息
- ✅ 平滑的动画过渡
- ✅ 真实的打字延迟效果
- ✅ 清晰的消息发送者区分
- ✅ 时间戳显示
- ✅ 在线状态指示

### 交互反馈
- 发送按钮禁用状态（输入框为空时）
- 打字中动画提示
- 消息发送后立即清空输入框
- 秘书回复前显示正在输入状态

## 未来扩展建议

1. **消息持久化**：保存聊天历史到本地存储
2. **更多回复类型**：
   - 游戏数据查询（资金、员工数、游戏列表等）
   - 操作引导（如何开发游戏、如何招聘等）
   - 成就提示（恭喜达成某个里程碑）
3. **表情包系统**：支持发送emoji或自定义表情
4. **语音消息**：支持语音输入和播放
5. **秘书个性化**：多种秘书外观和性格选择
6. **智能助手**：接入AI模型提供真实对话能力

## 使用示例

**示例对话1：**
- 玩家："你好"
- 秘书："您好，老板！有什么需要我帮忙的吗？"

**示例对话2：**
- 玩家："公司怎么样？"
- 秘书："咱们公司正在蓬勃发展中！"

**示例对话3：**
- 玩家："辛苦了"
- 秘书："为您服务是我的荣幸，老板！"

**示例对话4：**
- 玩家："哈哈"
- 秘书："看到老板开心我也很高兴！😊"

## 注意事项

- 当前版本的秘书回复基于预设规则，不支持真正的AI对话
- 消息历史不会保存，关闭界面后会清空
- 秘书回复延迟是模拟效果，不是真实网络请求

---

**创建时间**：2025年1月（游戏版本1.x）  
**设计理念**：为玩家提供沉浸式的游戏体验，增加与游戏世界的互动感
