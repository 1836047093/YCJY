# 员工分配岗位需求修改说明

## 修改内容

### 1. 统一岗位需求
**所有游戏类型（单机和网游）统一需求：**
- 5名程序员
- 5名策划师  
- 5名美术师
- 5名音效师
- **共计20名员工**

### 2. 排除客服岗位
**客服不参与游戏开发：**
- 客服无法被分配到游戏开发项目
- 在员工选择界面自动过滤掉客服
- 一键分配功能自动跳过客服

## 修改文件

### EnhancedAssignmentService.kt
**核心分配逻辑：**
- 移除了根据游戏主题判断岗位需求的逻辑
- 统一为固定岗位需求：5程序+5策划+5美术+5音效
- 添加客服过滤逻辑
- 按专业技能从高到低排序分配
- 人数不足时显示警告信息

**关键代码：**
```kotlin
// 过滤掉客服，客服不参与开发
val developmentEmployees = availableEmployees.filter { it.position != "客服" }

// 定义每个岗位需要的人数
val requiredPositions = mapOf(
    "程序员" to 5,
    "策划师" to 5,
    "美术师" to 5,
    "音效师" to 5
)
```

### GameProjectAssignment.kt
**手动分配对话框：**
- 在对话框中过滤掉客服
- 只显示"可用开发人员"（不包括客服）
- 一键分配按钮使用过滤后的开发人员列表

**关键代码：**
```kotlin
// 过滤掉客服，客服不参与开发
val developmentEmployees = remember(availableEmployees) {
    availableEmployees.filter { it.position != "客服" }
}
```

## 用户体验改进

### 分配对话框
- 标题改为"可用开发人员"，明确排除了客服
- 显示实际可分配人数（不计入客服）
- 一键分配自动选择最优秀的20名开发人员

### 分配结果
- 显示每个员工的专业技能等级
- 显示总技能点数
- 岗位人数不足时显示警告：
  - `⚠️ 程序员 人数不足，需要5人，实际分配3人`

## 验证方法

1. **创建新游戏项目**
   - 单机游戏和网游都需要相同岗位

2. **测试一键分配**
   - 点击"一键分配"按钮
   - 应选择技能最高的5程序+5策划+5美术+5音效
   - 客服不会被选中

3. **测试手动分配**
   - 打开员工分配对话框
   - 列表中不应该显示客服
   - 只能手动选择开发岗位员工

4. **测试人数不足**
   - 如果某个岗位员工少于5人
   - 应显示警告信息

## 注意事项

1. **现有存档兼容性**
   - 已分配的客服不会被自动移除
   - 但重新分配时会排除客服

2. **未来扩展**
   - `project` 参数保留在函数签名中
   - 便于将来可能需要根据游戏类型定制岗位需求

3. **性能优化**
   - 使用 `remember` 缓存过滤结果
   - 避免重复计算

## 修改日期
2025-01-19
