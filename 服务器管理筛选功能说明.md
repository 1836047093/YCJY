# 服务器管理筛选功能说明

## 修改概述
已按照用户要求修改服务器管理界面，将搜索框区域改为显示已租用服务器列表，并添加筛选功能。

## 核心修改

### 1. 新增数据结构

#### ServerDetail 数据类
```kotlin
data class ServerDetail(
    val server: ServerInstance,
    val gameName: String,
    val gameId: String
)
```
用于关联服务器实例与所属游戏的信息。

#### ServerFilter 枚举
```kotlin
enum class ServerFilter {
    ALL,           // 全部
    PUBLIC_POOL,   // 公共池
    ACTIVE,        // 运行中
    INACTIVE,      // 已停用
    BASIC,         // 星尘-D型
    INTERMEDIATE,  // 星尘-C型
    ADVANCED,      // 星尘-B型
    CLOUD          // 星尘-A型
}
```
提供8种筛选选项。

### 2. 已租用服务器收集逻辑

现在会收集所有已租用的服务器，包括：
- **公共池服务器**（SERVER_PUBLIC_POOL）
- **各网络游戏的专用服务器**

收集过程会遍历所有游戏，对于网络游戏（BusinessModel.ONLINE_GAME），读取其服务器信息并转换为 ServerDetail 对象。

### 3. UI 改进

#### 替换搜索框为筛选区域
原来的搜索框被替换为：
- **标题**：显示"已租用服务器 (数量)"
- **筛选按钮**：点击打开筛选对话框，按钮上显示当前筛选条件

#### 新增组件

**RentedServerCard（已租用服务器卡片）**
显示内容：
- 🖥️ **服务器类型**：显示服务器类型名称（星尘-D/C/B/A型）
- 📊 **容量**：显示服务器容量（万人）
- 🎮/📦 **所属游戏**：公共池显示📦，游戏服务器显示🎮
- 📅 **租用日期**：显示具体租用时间（年月日）
- 💰 **月费**：显示每月费用
- **状态标签**：运行中（绿色）/ 已停用（灰色）

**ServerFilterDialog（筛选对话框）**
分为两个区域：
1. **常用筛选**：全部、公共池、运行中、已停用
2. **按类型筛选**：D型、C型、B型、A型服务器

点击选项后自动关闭对话框并应用筛选。

**FilterOptionCard（筛选选项卡片）**
用于筛选对话框中的每个选项，选中时显示绿色高亮和✓标记。

### 4. 筛选功能

支持的筛选条件：
- **全部**：显示所有已租用的服务器
- **公共池**：仅显示公共池服务器
- **运行中**：仅显示状态为运行中的服务器
- **已停用**：仅显示已停用的服务器
- **星尘-D型**：仅显示D型服务器
- **星尘-C型**：仅显示C型服务器
- **星尘-B型**：仅显示B型服务器
- **星尘-A型**：仅显示A型服务器

## 修改文件
- **ServerManagementContent.kt**：核心修改文件

## 功能特点

1. **信息完整**：每个服务器卡片显示所有关键信息（类型、容量、所属、日期、月费、状态）
2. **灵活筛选**：8种筛选条件，满足不同查看需求
3. **视觉清晰**：
   - 公共池服务器用黄色标识
   - 游戏服务器用蓝色标识
   - 运行中服务器用绿色状态标签
   - 已停用服务器用灰色显示
4. **实时更新**：每3秒自动刷新数据
5. **空状态提示**：
   - 未租用任何服务器时提示"暂未租用任何服务器"
   - 筛选无结果时提示"未找到符合条件的服务器"

## 使用示例

### 查看所有已租用服务器
默认显示"全部"筛选条件，可以看到所有服务器。

### 查看公共池服务器
点击筛选按钮 → 选择"公共池" → 只显示公共池中的服务器。

### 查看某个游戏的服务器
点击筛选按钮 → 选择"全部" → 在列表中查找特定游戏名称。

### 查看运行中/已停用的服务器
点击筛选按钮 → 选择"运行中"或"已停用"。

### 按服务器类型筛选
点击筛选按钮 → 选择对应的服务器类型（D/C/B/A型）。

## 技术要点

1. **数据聚合**：从多个数据源（公共池 + 各游戏）收集服务器信息
2. **状态管理**：使用 `remember` 和 `mutableStateOf` 管理筛选状态
3. **响应式更新**：基于 `refreshTrigger` 实现定时刷新
4. **类型安全**：使用枚举确保筛选条件的类型安全
5. **UI一致性**：保持与其他界面相同的设计风格（深蓝/深紫色渐变背景）

## 后续可扩展功能

1. **搜索功能**：在筛选基础上添加按游戏名搜索
2. **排序功能**：按租用日期、月费、容量排序
3. **批量操作**：批量启用/停用服务器
4. **详情页**：点击服务器卡片查看更多详细信息
5. **统计报表**：显示服务器使用率、月费统计等
