# 阿里云安全组配置指南

## 📋 配置步骤

### 方法1：通过控制台配置（推荐）

1. **登录阿里云控制台**
   - 访问：https://ecs.console.aliyun.com/

2. **进入ECS实例**
   - 点击左侧菜单"实例与镜像" → "实例"
   - 找到你的实例（IP: 8.138.186.224）

3. **配置安全组**
   - 点击实例ID进入详情页
   - 点击"安全组"标签
   - 点击安全组ID进入安全组规则页面

4. **添加入站规则**
   - 点击"添加安全组规则"
   - 配置如下：
     - **规则方向**: 入方向
     - **授权策略**: 允许
     - **优先级**: 1（默认）
     - **协议类型**: 自定义TCP
     - **端口范围**: 3000/3000
     - **授权对象**: 0.0.0.0/0（允许所有IP访问）
     - **描述**: 兑换码API服务端口
   - 点击"保存"

5. **（可选）添加HTTP/HTTPS端口**
   - 如果后续要配置Nginx/IIS，也需要开放80和443端口
   - 端口范围: 80/80 和 443/443

### 方法2：通过API配置

```bash
# 需要安装阿里云CLI工具
aliyun ecs AuthorizeSecurityGroup --SecurityGroupId sg-xxxxx --IpProtocol tcp --PortRange 3000/3000 --SourceCidrIp 0.0.0.0/0
```

## ✅ 验证配置

配置完成后，从你的电脑测试：

```bash
# Windows PowerShell
curl http://8.138.186.224:3000/health

# 或使用浏览器访问
# http://8.138.186.224:3000/health
```

如果返回JSON数据，说明配置成功！

## 🔒 安全建议

1. **生产环境建议**：
   - 不要使用0.0.0.0/0，只允许特定IP访问
   - 或使用阿里云SLB（负载均衡）进行访问控制

2. **配置HTTPS**：
   - 使用Nginx/IIS配置SSL证书
   - 只开放443端口，关闭3000端口对外访问

3. **API密钥认证**：
   - 在API中添加API密钥验证
   - 防止未授权访问



