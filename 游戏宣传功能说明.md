# 游戏宣传功能说明

## 功能概述
为正在开发的游戏添加了宣传系统，通过投入资金进行宣传可以提升游戏的首发销量（单机游戏）或首发总注册（网络游戏）。

## 功能特性

### 1. 宣传指数显示
- 在游戏项目卡片中，商业模式右侧显示**宣传指数**（橙色标签）
- 宣传指数范围：0% - 100%
- 实时显示当前游戏的宣传投入情况

### 2. 宣传功能入口
- 在**开发中的游戏**项目卡片中，新增"📢 宣传游戏"按钮
- 点击按钮打开宣传对话框，查看宣传选项

### 3. 宣传选项
提供三种宣传规模，投入不同可获得不同的指数提升：

| 宣传规模 | 费用 | 指数提升 | 说明 |
|---------|------|---------|------|
| 小规模宣传 | ¥50,000 | +20% | 社交媒体、论坛推广 |
| 中等规模宣传 | ¥150,000 | +40% | 游戏展会、媒体评测 |
| 大规模宣传 | ¥500,000 | +80% | 电视广告、网络推广、明星代言 |

### 4. 宣传效果
- **单机游戏**：宣传指数影响首发销量
- **网络游戏**：宣传指数影响首发总注册数
- **效果计算**：
  - 宣传指数 100% 时：首发销量/注册提升 **50%**
  - 宣传指数低于 100% 时：也有提升效果，但不如 100% 明显
  - 宣传指数可累加，但最高为 100%

### 5. 实现细节

#### 数据模型
```kotlin
data class Game(
    // ... 其他字段
    val promotionIndex: Float = 0f // 宣传指数（0-1，表示0%-100%）
)
```

#### 宣传对话框功能
- 显示当前宣传指数和进度条
- 列出三种宣传选项，显示费用和预期效果
- 资金不足时选项置灰不可选
- 达到100%后不能继续投入
- 提示说明：单机游戏提升首发销量，网游提升首发总注册

#### 收益计算
在游戏发售时，收益系统会读取游戏的 `promotionIndex` 字段，应用到首发销量/注册的计算中：

```kotlin
// 首日销量/注册，应用宣传指数提升
val baseValue = Random.nextInt(800, 1200)
val promotionBonus = 1f + (promotionIndex * 0.5f)
val firstDaySales = (baseValue * promotionBonus).toInt()
```

## 使用流程

1. **创建游戏项目** → 进入开发阶段
2. **点击"📢 宣传游戏"按钮** → 打开宣传对话框
3. **选择宣传规模** → 根据预算选择合适的宣传方案
4. **确认投入** → 扣除资金，宣传指数立即提升
5. **多次宣传** → 可多次投入直至达到100%
6. **游戏发售** → 宣传效果自动应用到首发销量/注册

## 策略建议

- **早期宣传**：在开发阶段就可以进行宣传，不必等到发售前
- **分批投入**：资金有限时，可以先进行小规模或中等规模宣传
- **追求完美**：宣传指数达到100%时效果最佳，建议尽量达到满值
- **网游优先**：网络游戏的首发注册更重要，建议优先为网游投入宣传

## 技术实现文件清单

1. **GameData.kt** - 添加 `promotionIndex` 字段
2. **EnhancedGameProjectCard.kt** - UI显示和宣传对话框
3. **EnhancedProjectManagement.kt** - 宣传逻辑处理和金额扣除
4. **GameRevenueData.kt** - 首发销量/注册的计算逻辑
5. **MainActivity.kt** - 游戏发售时传入宣传指数参数

## 示例效果

### 无宣传（0%）
- 首发基础销量：800-1200份
- 首发总收益：假设定价¥50，首发收益约 ¥40,000 - ¥60,000

### 满级宣传（100%）
- 首发销量提升50%：1200-1800份
- 首发总收益：假设定价¥50，首发收益约 ¥60,000 - ¥90,000
- **提升效果显著！**

---

**开发完成时间**: 2025年1月
**版本**: v1.0
