# 初始资金调整完整修复说明

## 问题原因

初始资金被硬编码在**两个地方**，之前只修改了一处，导致新档仍然是100万。

## 修复内容

### 1. GameData.kt - SaveData数据类默认值
```kotlin
// 修改前
val money: Long = 1000000L

// 修改后
val money: Long = 3000000L
```

### 2. MainActivity.kt - 游戏状态初始化
```kotlin
// 修改前（第1167行）
var money by remember { mutableLongStateOf(saveData?.money ?: 1000000L) }

// 修改后
var money by remember { mutableLongStateOf(saveData?.money ?: 3000000L) }
```

## 为什么需要修改两处

1. **SaveData.kt**：定义数据类的默认值，但这个默认值只在某些场景下使用
2. **MainActivity.kt**：创建新游戏时，直接使用 `?: 1000000L` 作为后备值，而不是使用SaveData的默认值

这导致即使修改了SaveData的默认值，新游戏启动时仍会使用MainActivity中硬编码的100万。

## 如何生效

修改代码后，需要：
1. **重新编译应用**：点击Android Studio的 "Build" → "Rebuild Project"
2. **重新安装APK**：运行应用到设备/模拟器
3. **开新档测试**：创建新游戏，初始资金应该显示 ¥3.00M

## 注意事项

⚠️ **旧存档不受影响**：已有存档会继续使用存档中保存的资金数据

✅ **只有新开档才会使用300万初始资金**

## 验证方法

1. 编译并安装新版本
2. 返回主菜单
3. 点击"新游戏"
4. 进入游戏后，检查左上角资金显示
5. 应该显示 **¥3.00M** （而不是 ¥1.00M）

## 修改日期

2025-01-26（完整修复）
